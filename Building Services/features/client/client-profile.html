[file name]: client-profile.html
[file content begin]
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Profile - BuildingCare</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- CORRECTED paths -->
    <link rel="stylesheet" href="../../assets/css/base.css">
    <link rel="stylesheet" href="client.css">
    <style>
        /* From Uiverse.io by FH638 - Custom Menu */
        .profile-menu {
            display: flex;
            flex-direction: column;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            transition: 0.3s;
            padding: 15px;
            overflow: hidden;
            border: 2px solid var(--accent-light);
            box-shadow: 0 10px 25px rgba(4, 69, 80, 0.15);
            backdrop-filter: blur(10px);
        }

        .menu-item {
            font-size: 14px;
            background-color: transparent;
            border: none;
            padding: 15px 20px;
            color: var(--primary-dark);
            display: flex;
            align-items: center;
            position: relative;
            gap: 15px;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
            box-sizing: border-box;
            text-align: left;
            font-weight: 600;
            margin-bottom: 8px;
            width: 100%;
        }

        .menu-item:not(:active):hover,
        .menu-item:focus {
            background-color: rgba(159, 211, 205, 0.15);
            border: 2px solid var(--primary-light);
            color: var(--primary-medium);
            transform: translateX(5px);
        }

        .menu-item:focus,
        .menu-item:active {
            background-color: var(--primary-dark);
            outline: none;
            color: white;
            margin-left: 10px;
            border: 2px solid var(--primary-light);
        }

        .menu-item::before {
            content: "";
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            left: -10px;
            width: 4px;
            height: 60%;
            background-color: var(--primary-light);
            border-radius: 5px;
            opacity: 0;
            transition: 0.3s;
        }

        .menu-item:focus::before,
        .menu-item:active::before,
        .menu-item.active::before {
            opacity: 1;
            left: -5px;
        }

        .menu-item svg,
        .menu-item i {
            width: 20px;
            min-width: 20px;
            color: var(--primary-medium);
            transition: all 0.3s ease;
        }

        .menu-item:focus svg,
        .menu-item:active svg,
        .menu-item.active svg,
        .menu-item:focus i,
        .menu-item:active i,
        .menu-item.active i {
            color: white;
            transform: scale(1.1);
        }

        .profile-menu:hover > :not(.menu-item:hover) {
            transition: 300ms;
            filter: blur(1.5px);
            transform: scale(0.98, 0.98);
        }

        /* Active state for menu items */
        .menu-item.active {
            background-color: var(--primary-dark);
            color: white;
            margin-left: 10px;
            border: 2px solid var(--primary-light);
        }

        .menu-item.active i {
            color: white;
            transform: scale(1.1);
        }

        /* Profile info styling - TALLER VERSION */
        .profile-info {
            text-align: center;
            padding: 40px 25px !important;
            margin-bottom: 30px !important;
            background: linear-gradient(135deg, rgba(159, 211, 205, 0.2), rgba(79, 179, 174, 0.15));
            border-radius: 18px;
            border: 3px solid var(--accent-light);
            height: 350px !important;
            min-height: 350px !important;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 0 15px 35px rgba(79, 179, 174, 0.25);
            position: relative;
            overflow: hidden;
        }

        .profile-avatar {
            width: 140px !important;
            height: 140px !important;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-light), var(--primary-medium), var(--primary-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px !important;
            border: 6px solid var(--accent-light);
            box-shadow: 0 15px 35px rgba(79, 179, 174, 0.5);
            position: relative;
            z-index: 2;
        }

        .profile-avatar i {
            font-size: 4.5rem !important;
            color: white;
            text-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }

        .profile-name {
            color: var(--primary-dark);
            font-weight: 800 !important;
            font-size: 1.8rem !important;
            margin-bottom: 12px !important;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .profile-email {
            color: var(--primary-medium);
            font-size: 1.2rem !important;
            opacity: 0.9;
            margin-bottom: 20px !important;
            padding: 0 10px;
        }

        .premium-badge {
            display: inline-block;
            padding: 12px 25px !important;
            background: linear-gradient(135deg, var(--primary-light), var(--primary-medium));
            color: white;
            border-radius: 25px;
            font-weight: 700;
            font-size: 1rem !important;
            box-shadow: 0 6px 20px rgba(79, 179, 174, 0.4);
            border: 2px solid var(--accent-light);
            margin-top: 15px;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .profile-menu {
                padding: 10px;
            }

            .menu-item {
                padding: 12px 15px;
                font-size: 13px;
            }

            .menu-item i {
                font-size: 16px;
            }

            .profile-info {
                height: 300px !important;
                min-height: 300px !important;
                padding: 30px 20px !important;
            }

            .profile-avatar {
                width: 120px !important;
                height: 120px !important;
                margin-bottom: 20px !important;
            }

            .profile-avatar i {
                font-size: 3.5rem !important;
            }

            .profile-name {
                font-size: 1.5rem !important;
            }

            .profile-email {
                font-size: 1rem !important;
            }
        }

        /* Animation for menu */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .profile-menu {
            animation: slideIn 0.5s ease-out;
        }

        .menu-item {
            animation: slideIn 0.5s ease-out backwards;
        }

        .menu-item:nth-child(1) { animation-delay: 0.1s; }
        .menu-item:nth-child(2) { animation-delay: 0.2s; }
        .menu-item:nth-child(3) { animation-delay: 0.3s; }
        .menu-item:nth-child(4) { animation-delay: 0.4s; }
        .menu-item:nth-child(5) { animation-delay: 0.5s; }
        .menu-item:nth-child(6) { animation-delay: 0.6s; }
    </style>
</head>
<body>
    <!-- Header - Fixed paths -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <i class="fas fa-building" style="font-size: 2rem; color: var(--primary-light);"></i>
                <span class="logo-text">BuildingCare</span>
            </div>
            
            <nav id="main-nav">
                <ul>
                    <li><a href="../../index.html">Home</a></li>
                    <li><a href="../cleaning/cleaning-services.html">Cleaning Services</a></li>
                    <li><a href="../maintenance/maintenance-services.html">Maintenance Services</a></li>
                    <li><a href="../gallery/gallery.html">Gallery</a></li>
                    <li><a href="../about/about.html">About Us</a></li>
                    <li><a href="../faq/faq.html">FAQ</a></li>
                    <li><a href="client-profile.html" class="active">
                        <i class="fas fa-user"></i> My Profile
                    </a></li>
                    <li><a href="#" id="logout-btn">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a></li>
                </ul>
            </nav>
            
            <div class="header-actions">
                <button class="lang-toggle" id="lang-toggle">EN</button>
                <button class="mobile-menu-btn" id="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Profile Section - Updated with new menu -->
    <section class="section profile-section">
        <div class="container">
            <div class="row">
                <!-- Sidebar - New Uiverse menu design -->
                <div class="col-lg-3 mb-4">
                    <div class="profile-info">
                        <div class="profile-avatar">
                            <i class="fas fa-user-circle"></i>
                        </div>
                        <h4 class="profile-name" id="client-name">John Doe</h4>
                        <p class="profile-email" id="client-email">john.doe@example.com</p>
                        <div class="mt-2">
                            <span class="premium-badge">Premium Client</span>
                        </div>
                    </div>
                    
                    <div class="profile-menu">
                        <button class="menu-item active" onclick="showTab('bookings')">
                            <i class="fas fa-calendar-check"></i>
                            My Bookings
                        </button>
                        <button class="menu-item" onclick="showTab('new-booking')">
                            <i class="fas fa-plus-circle"></i>
                            New Booking
                        </button>
                        <button class="menu-item" onclick="showTab('edit-profile')">
                            <i class="fas fa-user-edit"></i>
                            Edit Profile
                        </button>
                        <button class="menu-item" onclick="showTab('payment-methods')">
                            <i class="fas fa-credit-card"></i>
                            Payment Methods
                        </button>
                        <button class="menu-item" onclick="showTab('notifications')">
                            <i class="fas fa-bell"></i>
                            Notifications
                        </button>
                        <button class="menu-item" onclick="window.location.href='../../index.html'">
                            <i class="fas fa-home"></i>
                            Home Page
                        </button>
                    </div>
                </div>
                
                <!-- Main Content - Original design -->
                <div class="col-lg-9">
                    <!-- Bookings Tab -->
                    <div id="bookings-tab" class="profile-tab active">
                        <div class="profile-header">
                            <h2>My Bookings</h2>
                            <p>Manage your service bookings and appointments</p>
                        </div>
                        
                        <div class="bookings-container">
                            <div class="booking-filters mb-4">
                                <button class="btn btn-outline-primary active" onclick="filterBookings('all')">All</button>
                                <button class="btn btn-outline-primary" onclick="filterBookings('upcoming')">Upcoming</button>
                                <button class="btn btn-outline-primary" onclick="filterBookings('completed')">Completed</button>
                                <button class="btn btn-outline-primary" onclick="filterBookings('cancelled')">Cancelled</button>
                            </div>
                            
                            <div class="bookings-list" id="bookings-list">
                                <!-- Bookings will be loaded here dynamically -->
                                <div class="no-bookings text-center py-5">
                                    <i class="fas fa-calendar-times fa-3x text-muted mb-3"></i>
                                    <h4>No bookings yet</h4>
                                    <p class="text-muted">You haven't made any service bookings yet.</p>
                                    <button class="btn btn-primary" onclick="showTab('new-booking')">Book a Service</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- New Booking Tab -->
                    <div id="new-booking-tab" class="profile-tab">
                        <div class="profile-header">
                            <h2>New Booking Request</h2>
                            <p>Book a new cleaning or maintenance service</p>
                        </div>
                        
                        <div class="booking-form-container">
                            <form id="new-booking-form">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="service-type" class="form-label">Service Type</label>
                                        <select class="form-select" id="service-type" required>
                                            <option value="">Select service type</option>
                                            <option value="cleaning">Cleaning Services</option>
                                            <option value="maintenance">Maintenance Services</option>
                                            <option value="pest-control">Pest Control</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="service-category" class="form-label">Service Category</label>
                                        <select class="form-select" id="service-category" required>
                                            <option value="">Select category</option>
                                            <option value="home-cleaning">Home Cleaning</option>
                                            <option value="common-area">Common Area Cleaning</option>
                                            <option value="electrical">Electrical Maintenance</option>
                                            <option value="plumbing">Plumbing Services</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="booking-date" class="form-label">Preferred Date & Time</label>
                                    <input type="datetime-local" class="form-control" id="booking-date" required>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="special-requests" class="form-label">Special Requests</label>
                                    <textarea class="form-control" id="special-requests" rows="3" placeholder="Any special requirements or instructions..."></textarea>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="booking-address" class="form-label">Service Address</label>
                                    <input type="text" class="form-control" id="booking-address" required>
                                </div>
                                
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-calendar-plus"></i> Book Service
                                </button>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Edit Profile Tab -->
                    <div id="edit-profile-tab" class="profile-tab">
                        <div class="profile-header">
                            <h2>Edit Profile</h2>
                            <p>Update your personal information and preferences</p>
                        </div>
                        
                        <div class="profile-form-container">
                            <form id="edit-profile-form">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="edit-first-name" class="form-label">First Name</label>
                                        <input type="text" class="form-control" id="edit-first-name" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="edit-last-name" class="form-label">Last Name</label>
                                        <input type="text" class="form-control" id="edit-last-name" required>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="edit-email" class="form-label">Email Address</label>
                                    <input type="email" class="form-control" id="edit-email" required>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="edit-phone" class="form-label">Phone Number</label>
                                    <input type="tel" class="form-control" id="edit-phone" required>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="edit-address" class="form-label">Address</label>
                                    <input type="text" class="form-control" id="edit-address" required>
                                </div>
                                
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> Update Profile
                                </button>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Payment Methods Tab -->
                    <div id="payment-methods-tab" class="profile-tab">
                        <div class="profile-header">
                            <h2>Payment Methods</h2>
                            <p>Manage your payment methods and billing information</p>
                        </div>
                        
                        <div class="payment-methods-container">
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="payment-card">
                                        <div class="payment-header">
                                            <i class="fab fa-cc-visa fa-2x" style="color: var(--primary-medium);"></i>
                                            <span class="badge" style="background: var(--primary-light); color: var(--primary-dark);">Default</span>
                                        </div>
                                        <div class="payment-info">
                                            <h6>Visa ending in 4242</h6>
                                            <p class="text-muted">Expires 12/2025</p>
                                        </div>
                                        <div class="payment-actions">
                                            <button class="btn btn-sm btn-outline-danger" onclick="removePaymentMethod(this)">Remove</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="payment-card">
                                        <div class="payment-header">
                                            <i class="fab fa-cc-mastercard fa-2x" style="color: var(--primary-medium);"></i>
                                        </div>
                                        <div class="payment-info">
                                            <h6>Mastercard ending in 5555</h6>
                                            <p class="text-muted">Expires 08/2024</p>
                                        </div>
                                        <div class="payment-actions">
                                            <button class="btn btn-sm btn-outline-primary" onclick="setDefaultPayment(this)">Set Default</button>
                                            <button class="btn btn-sm btn-outline-danger" onclick="removePaymentMethod(this)">Remove</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addPaymentModal">
                                <i class="fas fa-plus"></i> Add Payment Method
                            </button>
                        </div>
                    </div>
                    
                    <!-- Notifications Tab -->
                    <div id="notifications-tab" class="profile-tab">
                        <div class="profile-header">
                            <h2>Notifications</h2>
                            <p>Manage your notification preferences</p>
                        </div>
                        
                        <div class="notifications-container">
                            <div class="notification-preferences">
                                <div class="preference-item">
                                    <div class="preference-info">
                                        <h6>Booking Confirmations</h6>
                                        <p class="text-muted">Receive notifications when bookings are confirmed</p>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" checked>
                                    </div>
                                </div>
                                
                                <div class="preference-item">
                                    <div class="preference-info">
                                        <h6>Service Reminders</h6>
                                        <p class="text-muted">Get reminders before scheduled services</p>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" checked>
                                    </div>
                                </div>
                                
                                <div class="preference-item">
                                    <div class="preference-info">
                                        <h6>Promotional Offers</h6>
                                        <p class="text-muted">Receive updates about new services and promotions</p>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Add Payment Modal -->
    <div class="modal fade" id="addPaymentModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background: var(--primary-dark); color: white;">
                    <h5 class="modal-title">Add Payment Method</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="add-payment-form">
                        <div class="mb-3">
                            <label for="card-number" class="form-label">Card Number</label>
                            <input type="text" class="form-control" id="card-number" placeholder="1234 5678 9012 3456" required>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="expiry-date" class="form-label">Expiry Date</label>
                                <input type="text" class="form-control" id="expiry-date" placeholder="MM/YY" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="cvv" class="form-label">CVV</label>
                                <input type="text" class="form-control" id="cvv" placeholder="123" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="cardholder-name" class="form-label">Cardholder Name</label>
                            <input type="text" class="form-control" id="cardholder-name" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="addPaymentMethod()">Add Card</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer - Fixed paths -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>BuildingCare</h3>
                    <p>Professional building maintenance and cleaning services with verified providers.</p>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="../../index.html">Home</a></li>
                        <li><a href="../cleaning/cleaning-services.html">Cleaning Services</a></li>
                        <li><a href="../maintenance/maintenance-services.html">Maintenance Services</a></li>
                        <li><a href="../gallery/gallery.html">Gallery</a></li>
                        <li><a href="../about/about.html">About Us</a></li>
                        <li><a href="../contact/contact.html">Contact</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Services</h3>
                    <ul class="footer-links">
                        <li><a href="../cleaning/cleaning-services.html">Cleaning Services</a></li>
                        <li><a href="../maintenance/maintenance-services.html">Maintenance Services</a></li>
                        <li><a href="#">Pest Control</a></li>
                        <li><a href="#">Emergency Services</a></li>
                        <li><a href="#">Consultation</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Contact Us</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-map-marker-alt"></i> 123 Business District, City</li>
                        <li><i class="fas fa-phone"></i> +123 456 7890</li>
                        <li><i class="fas fa-envelope"></i> info@buildingcare.com</li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2023 BuildingCare. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Chat Bubble -->
    <div class="chat-bubble">
        <i class="fas fa-comments"></i>
    </div>

    <!-- JavaScript - Updated for new menu -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Simple tab switching - Updated for button menu
        function showTab(tabName) {
            console.log('Switching to tab:', tabName);
            
            // Remove active class from all tabs
            document.querySelectorAll('.profile-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all menu items
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Add active class to selected tab
            const selectedTab = document.getElementById(tabName + '-tab');
            if (selectedTab) {
                selectedTab.classList.add('active');
            }
            
            // Add active class to clicked menu item
            event.target.classList.add('active');
            
            // Update URL hash
            window.location.hash = tabName;
            
            // If showing bookings tab, load bookings
            if (tabName === 'bookings') {
                loadBookings();
            }
            
            return false;
        }
        
        // Load user data from localStorage
        function loadUserData() {
            try {
                const userData = localStorage.getItem('currentUser');
                if (userData) {
                    const user = JSON.parse(userData);
                    
                    // Update profile display
                    document.getElementById('client-name').textContent = 
                        `${user.firstName || 'John'} ${user.lastName || 'Doe'}`;
                    document.getElementById('client-email').textContent = user.email || 'john.doe@example.com';
                    
                    // Populate edit form
                    document.getElementById('edit-first-name').value = user.firstName || '';
                    document.getElementById('edit-last-name').value = user.lastName || '';
                    document.getElementById('edit-email').value = user.email || '';
                    document.getElementById('edit-phone').value = user.phone || '';
                    document.getElementById('edit-address').value = user.address || '';
                }
            } catch (e) {
                console.log('No user data found, using defaults');
            }
        }
        
        // Load and display bookings
        function loadBookings() {
            try {
                // Get bookings from localStorage or use sample data
                let bookings = JSON.parse(localStorage.getItem('clientBookings'));
                
                if (!bookings || bookings.length === 0) {
                    // Create sample bookings
                    bookings = [
                        {
                            id: 'booking_1',
                            serviceType: 'cleaning',
                            serviceCategory: 'home-cleaning',
                            date: new Date(Date.now() + 86400000).toISOString(), // Tomorrow
                            specialRequests: 'Please bring extra cleaning supplies',
                            address: '123 Main St, Apartment 4B',
                            status: 'upcoming',
                            createdAt: new Date().toISOString()
                        },
                        {
                            id: 'booking_2',
                            serviceType: 'maintenance',
                            serviceCategory: 'plumbing',
                            date: new Date(Date.now() - 86400000).toISOString(), // Yesterday
                            specialRequests: 'Leaking faucet in kitchen',
                            address: '123 Main St, Apartment 4B',
                            status: 'completed',
                            createdAt: new Date(Date.now() - 172800000).toISOString()
                        }
                    ];
                    localStorage.setItem('clientBookings', JSON.stringify(bookings));
                }
                
                // Display all bookings initially
                displayBookings(bookings);
                
            } catch (e) {
                console.error('Error loading bookings:', e);
                showNotification('Error loading bookings', 'danger');
            }
        }
        
        // Filter bookings
        function filterBookings(status) {
            try {
                // Update active button
                document.querySelectorAll('.booking-filters .btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                event.target.classList.add('active');
                
                // Get all bookings
                const bookings = JSON.parse(localStorage.getItem('clientBookings')) || [];
                
                // Filter if needed
                const filteredBookings = status === 'all' ? bookings : 
                    bookings.filter(booking => booking.status === status);
                
                // Display filtered bookings
                displayBookings(filteredBookings);
                
            } catch (e) {
                console.error('Error filtering bookings:', e);
            }
        }
        
        // Display bookings in the list
        function displayBookings(bookings) {
            const bookingsList = document.getElementById('bookings-list');
            
            if (!bookings || bookings.length === 0) {
                bookingsList.innerHTML = `
                    <div class="no-bookings text-center py-5">
                        <i class="fas fa-calendar-times fa-3x text-muted mb-3"></i>
                        <h4>No bookings found</h4>
                        <p class="text-muted">No bookings match your current filter.</p>
                        <button class="btn btn-primary" onclick="showTab('new-booking')">Book a Service</button>
                    </div>
                `;
                return;
            }
            
            // Format booking cards
            bookingsList.innerHTML = bookings.map(booking => `
                <div class="booking-card">
                    <div class="booking-header">
                        <div class="booking-service">${formatServiceName(booking.serviceType)} - ${formatCategoryName(booking.serviceCategory)}</div>
                        <span class="booking-status status-${booking.status}">${formatStatus(booking.status)}</span>
                    </div>
                    <div class="booking-details">
                        <div class="booking-detail">
                            <span class="booking-label">Date & Time</span>
                            <span class="booking-value">${formatDate(booking.date)}</span>
                        </div>
                        <div class="booking-detail">
                            <span class="booking-label">Address</span>
                            <span class="booking-value">${booking.address}</span>
                        </div>
                        <div class="booking-detail">
                            <span class="booking-label">Requested On</span>
                            <span class="booking-value">${formatDate(booking.createdAt)}</span>
                        </div>
                    </div>
                    ${booking.specialRequests ? `
                        <div class="booking-detail">
                            <span class="booking-label">Special Requests</span>
                            <span class="booking-value">${booking.specialRequests}</span>
                        </div>
                    ` : ''}
                    <div class="booking-actions">
                        ${booking.status === 'upcoming' || booking.status === 'pending' ? `
                            <button class="btn btn-sm btn-outline-danger" onclick="cancelBooking('${booking.id}')">Cancel</button>
                        ` : ''}
                        <button class="btn btn-sm btn-outline-primary" onclick="viewBookingDetails('${booking.id}')">View Details</button>
                    </div>
                </div>
            `).join('');
        }
        
        // View booking details
        function viewBookingDetails(bookingId) {
            try {
                const bookings = JSON.parse(localStorage.getItem('clientBookings')) || [];
                const booking = bookings.find(b => b.id === bookingId);
                
                if (booking) {
                    showNotification(`
                        <strong>Booking Details:</strong><br>
                        <strong>Service:</strong> ${formatServiceName(booking.serviceType)} - ${formatCategoryName(booking.serviceCategory)}<br>
                        <strong>Date:</strong> ${formatDate(booking.date)}<br>
                        <strong>Status:</strong> ${formatStatus(booking.status)}<br>
                        <strong>Address:</strong> ${booking.address}<br>
                        ${booking.specialRequests ? `<strong>Special Requests:</strong> ${booking.specialRequests}` : ''}
                    `, 'info');
                }
            } catch (e) {
                console.error('Error viewing booking details:', e);
            }
        }
        
        // Cancel a booking
        function cancelBooking(bookingId) {
            if (!confirm('Are you sure you want to cancel this booking?')) {
                return;
            }
            
            try {
                const bookings = JSON.parse(localStorage.getItem('clientBookings')) || [];
                const bookingIndex = bookings.findIndex(b => b.id === bookingId);
                
                if (bookingIndex !== -1) {
                    bookings[bookingIndex].status = 'cancelled';
                    localStorage.setItem('clientBookings', JSON.stringify(bookings));
                    
                    // Get current filter and refresh
                    const activeFilter = document.querySelector('.booking-filters .btn.active');
                    const status = activeFilter ? activeFilter.getAttribute('data-status') : 'all';
                    filterBookings(status);
                    
                    showNotification('Booking cancelled successfully!', 'success');
                }
            } catch (e) {
                console.error('Error cancelling booking:', e);
                showNotification('Error cancelling booking', 'danger');
            }
        }
        
        // Handle new booking form
        document.getElementById('new-booking-form')?.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                serviceType: document.getElementById('service-type').value,
                serviceCategory: document.getElementById('service-category').value,
                date: document.getElementById('booking-date').value,
                specialRequests: document.getElementById('special-requests').value,
                address: document.getElementById('booking-address').value,
                status: 'upcoming',
                id: 'booking_' + Math.random().toString(36).substr(2, 9),
                createdAt: new Date().toISOString()
            };
            
            // Validate required fields
            if (!formData.serviceType || !formData.serviceCategory || !formData.date || !formData.address) {
                showNotification('Please fill in all required fields', 'danger');
                return;
            }
            
            try {
                // Save booking
                const bookings = JSON.parse(localStorage.getItem('clientBookings')) || [];
                bookings.push(formData);
                localStorage.setItem('clientBookings', JSON.stringify(bookings));
                
                // Reset form
                this.reset();
                
                // Show success message and switch to bookings tab
                showNotification('Booking request submitted successfully!', 'success');
                setTimeout(() => showTab('bookings'), 1500);
                
            } catch (e) {
                console.error('Error creating booking:', e);
                showNotification('Error creating booking', 'danger');
            }
        });
        
        // Handle edit profile form
        document.getElementById('edit-profile-form')?.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                firstName: document.getElementById('edit-first-name').value,
                lastName: document.getElementById('edit-last-name').value,
                email: document.getElementById('edit-email').value,
                phone: document.getElementById('edit-phone').value,
                address: document.getElementById('edit-address').value
            };
            
            try {
                // Update user data
                const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
                const updatedUser = { ...currentUser, ...formData };
                localStorage.setItem('currentUser', JSON.stringify(updatedUser));
                
                // Update displayed information
                loadUserData();
                
                showNotification('Profile updated successfully!', 'success');
                
            } catch (e) {
                console.error('Error updating profile:', e);
                showNotification('Error updating profile', 'danger');
            }
        });
        
        // Payment methods functions
        function removePaymentMethod(button) {
            if (confirm('Are you sure you want to remove this payment method?')) {
                const card = button.closest('.payment-card');
                if (card) {
                    card.style.opacity = '0.5';
                    setTimeout(() => {
                        card.remove();
                        showNotification('Payment method removed', 'success');
                    }, 300);
                }
            }
        }
        
        function setDefaultPayment(button) {
            const card = button.closest('.payment-card');
            if (card) {
                // Remove default badge from all cards
                document.querySelectorAll('.payment-card .badge').forEach(badge => {
                    badge.remove();
                });
                
                // Add default badge to this card
                const paymentHeader = card.querySelector('.payment-header');
                if (paymentHeader) {
                    paymentHeader.innerHTML += '<span class="badge" style="background: var(--primary-light); color: var(--primary-dark); margin-left: 10px;">Default</span>';
                }
                
                showNotification('Payment method set as default', 'success');
            }
        }
        
        function addPaymentMethod() {
            const modal = bootstrap.Modal.getInstance(document.getElementById('addPaymentModal'));
            if (modal) modal.hide();
            showNotification('Payment method added successfully', 'success');
        }
        
        // Logout function
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('currentUser');
                window.location.href = '../../index.html';
            }
        }
        
        // Helper functions
        function formatServiceName(serviceType) {
            const names = {
                'cleaning': 'Cleaning Service',
                'maintenance': 'Maintenance Service',
                'pest-control': 'Pest Control'
            };
            return names[serviceType] || serviceType;
        }
        
        function formatCategoryName(category) {
            const names = {
                'home-cleaning': 'Home Cleaning',
                'common-area': 'Common Area Cleaning',
                'electrical': 'Electrical Maintenance',
                'plumbing': 'Plumbing Services'
            };
            return names[category] || category;
        }
        
        function formatStatus(status) {
            const statusMap = {
                'pending': 'Pending',
                'upcoming': 'Upcoming',
                'confirmed': 'Confirmed',
                'in-progress': 'In Progress',
                'completed': 'Completed',
                'cancelled': 'Cancelled'
            };
            return statusMap[status] || status;
        }
        
        function formatDate(dateString) {
            if (!dateString) return 'Not specified';
            
            try {
                const date = new Date(dateString);
                if (isNaN(date.getTime())) return 'Invalid date';
                
                return date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            } catch (e) {
                return 'Invalid date';
            }
        }
        
        function showNotification(message, type = 'info') {
            // Remove any existing notifications
            document.querySelectorAll('.alert').forEach(alert => alert.remove());
            
            const notification = document.createElement('div');
            notification.className = `alert alert-${type} alert-dismissible fade show`;
            notification.style.cssText = `
                position: fixed;
                top: 120px;
                right: 20px;
                z-index: 9999;
                min-width: 300px;
                max-width: 400px;
                box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            `;
            notification.innerHTML = `
                <div class="d-flex align-items-center">
                    <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'danger' ? 'fa-exclamation-circle' : 'fa-info-circle'} me-2"></i>
                    <span>${message}</span>
                    <button type="button" class="btn-close ms-auto" data-bs-dismiss="alert"></button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Client profile page loaded');
            
            // Load user data
            loadUserData();
            
            // Load initial bookings if on bookings tab
            if (document.getElementById('bookings-tab').classList.contains('active')) {
                loadBookings();
            }
            
            // Set logout button event
            document.getElementById('logout-btn')?.addEventListener('click', function(e) {
                e.preventDefault();
                logout();
            });
            
            // Check URL hash for tab
            const hash = window.location.hash.replace('#', '');
            if (hash && document.getElementById(hash + '-tab')) {
                // Remove active class from all menu items
                document.querySelectorAll('.menu-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                // Add active class to corresponding menu item
                const menuItem = document.querySelector(`.menu-item[onclick*="${hash}"]`);
                if (menuItem) {
                    menuItem.classList.add('active');
                }
                
                showTab(hash);
            }
            
            // Add hover effects to menu items
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateX(8px)';
                });
                
                item.addEventListener('mouseleave', function() {
                    if (!this.classList.contains('active')) {
                        this.style.transform = 'translateX(0)';
                    }
                });
            });
        });
    </script>
</body>
</html>
[file content end]